## Полная Спецификация

**Цель:**  
Создать Telegram-бота (используя `aiogram`), который будет принимать поисковый запрос пользователя, обращаться к API Роспатента для получения 10 наиболее релевантных патентов и затем при помощи GigaChat извлекать и суммировать ключевую информацию о каждом патенте (краткое описание, дата публикации, преимущества и недостатки). Итоговый ответ бот возвращает пользователю в удобном и сжатом виде.

**Компоненты и Взаимодействия:**

1. **Telegram-бот (aiogram):**  
   - Пользователь вводит запрос в чат с ботом.  
   - Бот при получении запроса вызывает логику взаимодействия с API Роспатента и GigaChat.  
   - В итоге бот отправляет пользователю обработанный ответ.

2. **API Роспатента (https://searchplatform.rospatent.gov.ru/):**  
   - Доступ осуществляется по JWT, полученному заранее из личного кабинета разработчика.  
   - Метод `/search` (POST):  
     ```json
     {
       "qn": "<запрос пользователя>",
       "limit": 10
     }
     ```
   - Ответ — JSON с массивом `hits`, содержащих данные о патентах (название, дата публикации, описание в `snippet`).

3. **GigaChat API:**  
   - На вход подаётся текст патента (название, фрагмент описания, дата).  
   - Модель получает инструкцию: «Извлеки краткое описание, дату, преимущества и недостатки».  
   - Возвращает структурированный ответ, который парсится и отображается пользователю.

**Нефункциональные Требования:**
- Надёжная обработка ошибок (нет данных, проблемы с GigaChat или Роспатентом).
- Логирование основных событий.
- Документация: README по установке, запуску и настройке (где взять JWT).

**Конечный Результат:**
- Пользователь вводит запрос.
- Получает итоговое сообщение от бота с 10 патентами, каждое с кратким описанием, датой, преимуществами и недостатками.

---

## План Разработки, Вариант 1 (Параллельное Разделение Задач)

### Этап 1 (1-2 недели)

**Цели:**  
- Настроить окружение.  
- Реализовать базовый Telegram-бот.  
- Интегрировать API Роспатента и получить простой результат.

**Dev1 (Инфраструктура и Бот):**  
1. Инициализировать проект: репозиторий, виртуальное окружение, `requirements.txt`.  
2. Реализовать бота на `aiogram`: команды `/start`, `/help`, при вводе текста — вызов логики поиска.  
3. Логирование входящих сообщений.

**Dev2 (API Роспатента):**  
1. Получить JWT вручную.  
2. Написать функцию, делающую POST-запрос к `/search` и возвращающую до 10 патентов.  
3. Извлечь название, дату, описание (snippet) из ответа.  
4. Предоставить Dev1 функцию для получения результатов по запросу пользователя.

**Результат:**  
- Пользователь вводит запрос → бот возвращает названия 10 патентов.

### Этап 2 (1-2 недели)

**Цели:**  
- Интеграция с GigaChat.  
- Суммаризация и структурирование ответа.

**Dev1 (Интеграция всего):**  
1. Получить от Dev2 функцию для суммаризации (GigaChat).  
2. Встраивать её в ответ бота: на вход — данные патентов, на выход — итоговая информация.  
3. Форматировать итоговый ответ для пользователя.

**Dev2 (GigaChat, Обработка Данных):**  
1. Написать функцию для общения с GigaChat: на вход данные патента, на выход — структурированный ответ.  
2. Обработать формат ответа, извлечь краткое описание, дату, преимущества, недостатки.  
3. Вернуть Dev1 функцию для суммаризации каждого патента.

**Результат:**  
- Пользователь вводит запрос → получает итоговое сообщение с расширенной информацией (описание, дата, плюсы и минусы).

---

## План Разработки, Вариант 2 (Последовательное Разделение Задач)

- В этом варианте один разработчик полностью делает первый спринт (бот + API Роспатента, простой ответ), а второй разработчик во втором спринте добавляет функционал GigaChat и формирует расширенный ответ.

### Спринт 1 (Dev1)

**Цели:**  
- Создать базовый Telegram-бот.  
- Интегрировать API Роспатента.  
- Возвращать простой ответ (например, только названия патентов).

**Задачи Dev1:**  
1. Настроить окружение, репозиторий, документацию.  
2. Реализовать бота на `aiogram` (`/start`, обработка текстовых запросов).  
3. Интегрировать API Роспатента (получение JWT вручную, запрос к `/search`), извлечь названия 10 патентов.  
4. При вводе пользователем запроса отправлять ему список названий патентов.

**Результат Спринта 1:**  
- Бот готов к работе: по запросу возвращает список 10 найденных патентов (только названия).

### Спринт 2 (Dev2)

**Цели:**  
- Добавить GigaChat для суммаризации.  
- Извлекать из данных патентов расширенную информацию (описание, дата, преимущества, недостатки).  
- Возвращать итоговый, улучшенный ответ.

**Задачи Dev2:**  
1. Изучить формат данных, получаемых от Бота/Роспатента (спринт 1).  
2. Написать функцию, которая отправляет данные каждого патента в GigaChat и получает структурированный ответ.  
3. Интегрировать функцию GigaChat в цепочку: теперь при запросе пользователя, помимо названий, бот получает от GigaChat полную суммаризацию.  
4. Обновить ответ бота: теперь пользователь получает более детальный ответ по каждому патенту.

**Результат Спринта 2:**  
- Пользователь вводит запрос → получает итоговую структурированную информацию по 10 патентам.

---
